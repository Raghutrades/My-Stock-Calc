<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock and Risk-Reward Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #e8f5e9; color: #333; }
    h2 { color: #2e7d32; }
    .container { max-width: 500px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: white; }
    .form-group { margin-bottom: 10px; }
    label { display: block; margin-bottom: 5px; }
    input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
    button { background-color: #4caf50; color: white; padding: 10px; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background-color: #388e3c; }
    #result { margin-top: 20px; padding: 10px; border: 1px solid #4caf50; background-color: #f1f8e9; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Indian Stock Data and Risk-Reward Calculator</h2>

    <!-- Stock Symbol Input -->
    <div class="form-group">
      <label for="stockSymbol">Enter Stock Symbol (e.g., RELIANCE.BSE):</label>
      <input type="text" id="stockSymbol" placeholder="Enter Stock Symbol">
    </div>
    <button onclick="fetchStockData()">Fetch Stock Data</button>

    <!-- Display Stock Data -->
    <div id="stockData"></div>

    <h3>Buy/Sell Profit Calculator</h3>
    <form id="buySellCalculator">
      <div class="form-group">
        <label for="stockPrice">Stock Price (₹):</label>
        <input type="number" id="stockPrice" placeholder="Enter Stock Price">
      </div>
      <div class="form-group">
        <label for="targetPrice">Target Price (₹):</label>
        <input type="number" id="targetPrice" placeholder="Enter Target Price">
      </div>
      <div class="form-group">
        <label for="stopLoss">Stop Loss (₹):</label>
        <input type="number" id="stopLoss" placeholder="Enter Stop Loss">
      </div>
      <div class="form-group">
        <label for="quantity">Quantity of Stocks:</label>
        <input type="number" id="quantity" placeholder="Enter Quantity">
      </div>
      <button type="button" onclick="calculateProfit()">Calculate</button>
    </form>

    <!-- Display Results -->
    <div id="result"></div>
  </div>

  <script>
    const apiKey = 'KL6VFNMG4NT63EMT';

    // Fetch Stock Data from Alpha Vantage
    function fetchStockData() {
      const stockSymbol = document.getElementById('stockSymbol').value;
      fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${stockSymbol}&apikey=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          const timeSeries = data['Time Series (Daily)'];
          const lastRefreshed = data['Meta Data']['3. Last Refreshed'];
          const latestData = timeSeries[lastRefreshed];
          
          const stockDataHtml = `
            <h4>Latest Stock Data for ${stockSymbol}</h4>
            <p>Open: ₹${latestData['1. open']}</p>
            <p>High: ₹${latestData['2. high']}</p>
            <p>Low: ₹${latestData['3. low']}</p>
            <p>Close: ₹${latestData['4. close']}</p>
          `;
          document.getElementById('stockData').innerHTML = stockDataHtml;
        })
        .catch(error => console.error('Error fetching stock data:', error));
    }

    // Buy/Sell Profit Calculator
    function calculateProfit() {
      const stockPrice = parseFloat(document.getElementById('stockPrice').value);
      const targetPrice = parseFloat(document.getElementById('targetPrice').value);
      const stopLoss = parseFloat(document.getElementById('stopLoss').value);
      const quantity = parseInt(document.getElementById('quantity').value);

      const capitalRequired = stockPrice * quantity;
      const profitPotential = (targetPrice - stockPrice) * quantity;
      const risk = (stockPrice - stopLoss) * quantity;

      const riskRewardRatio = profitPotential / risk;

      const resultHtml = `
        <p>Capital Required: ₹${capitalRequired}</p>
        <p>Profit Potential: ₹${profitPotential}</p>
        <p>Risk: ₹${risk}</p>
        <p>Risk/Reward Ratio: ${riskRewardRatio.toFixed(2)}</p>
      `;
      document.getElementById('result').innerHTML = resultHtml;
    }
  </script>
</body>
</html>
